<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
        <title>MegaBonk Complete Guide - Items, Weapons, Tomes, Characters & Builds</title>
        <meta
            name="description"
            content="Complete MegaBonk guide with 77 items, 29 weapons, 23 tomes, build planner, and breakpoint calculator"
        />
        <meta name="theme-color" content="#00ff88" />

        <!-- Resource hints for faster loading -->
        <link rel="preconnect" href="https://megabonk.guide" />
        <link rel="dns-prefetch" href="https://megabonk.guide" />
        <link rel="preload" href="data:application/json;base64,ewogICAgIm5hbWUiOiAiTWVnYUJvbmsgQ29tcGxldGUgR3VpZGUiLAogICAgInNob3J0X25hbWUiOiAiTWVnYUJvbmsgR3VpZGUiLAogICAgImRlc2NyaXB0aW9uIjogIkNvbXBsZXRlIGd1aWRlIGZvciBNZWdhQm9uayB3aXRoIDc3IGl0ZW1zLCAyOSB3ZWFwb25zLCAyMyB0b21lcywgYnVpbGQgcGxhbm5lciwgYW5kIGNhbGN1bGF0b3IiLAogICAgInN0YXJ0X3VybCI6ICIuL2luZGV4Lmh0bWwiLAogICAgImRpc3BsYXkiOiAic3RhbmRhbG9uZSIsCiAgICAiYmFja2dyb3VuZF9jb2xvciI6ICIjMWExYTJlIiwKICAgICJ0aGVtZV9jb2xvciI6ICIjMDBmZjg4IiwKICAgICJvcmllbnRhdGlvbiI6ICJhbnkiLAogICAgImljb25zIjogWwogICAgICAgIHsKICAgICAgICAgICAgInNyYyI6ICJpY29ucy9pY29uLTE5Mi5wbmciLAogICAgICAgICAgICAic2l6ZXMiOiAiMTkyeDE5MiIsCiAgICAgICAgICAgICJ0eXBlIjogImltYWdlL3BuZyIsCiAgICAgICAgICAgICJwdXJwb3NlIjogImFueSBtYXNrYWJsZSIKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgICAgInNyYyI6ICJpY29ucy9pY29uLTUxMi5wbmciLAogICAgICAgICAgICAic2l6ZXMiOiAiNTEyeDUxMiIsCiAgICAgICAgICAgICJ0eXBlIjogImltYWdlL3BuZyIsCiAgICAgICAgICAgICJwdXJwb3NlIjogImFueSBtYXNrYWJsZSIKICAgICAgICB9CiAgICBdLAogICAgImNhdGVnb3JpZXMiOiBbImdhbWVzIiwgInV0aWxpdGllcyIsICJyZWZlcmVuY2UiXSwKICAgICJzY3JlZW5zaG90cyI6IFtdLAogICAgInNob3J0Y3V0cyI6IFsKICAgICAgICB7CiAgICAgICAgICAgICJuYW1lIjogIkl0ZW1zIiwKICAgICAgICAgICAgInNob3J0X25hbWUiOiAiSXRlbXMiLAogICAgICAgICAgICAiZGVzY3JpcHRpb24iOiAiVmlldyBhbGwgNzcgaXRlbXMiLAogICAgICAgICAgICAidXJsIjogIi4vaW5kZXguaHRtbD90YWI9aXRlbXMiLAogICAgICAgICAgICAiaWNvbnMiOiBbeyAic3JjIjogImljb25zL2ljb24tMTkyLnBuZyIsICJzaXplcyI6ICIxOTJ4MTkyIiB9XQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgICAibmFtZSI6ICJCdWlsZCBQbGFubmVyIiwKICAgICAgICAgICAgInNob3J0X25hbWUiOiAiQnVpbGRzIiwKICAgICAgICAgICAgImRlc2NyaXB0aW9uIjogIlBsYW4geW91ciBidWlsZCIsCiAgICAgICAgICAgICJ1cmwiOiAiLi9pbmRleC5odG1sP3RhYj1idWlsZC1wbGFubmVyIiwKICAgICAgICAgICAgImljb25zIjogW3sgInNyYyI6ICJpY29ucy9pY29uLTE5Mi5wbmciLCAic2l6ZXMiOiAiMTkyeDE5MiIgfV0KICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgICAgIm5hbWUiOiAiQ2FsY3VsYXRvciIsCiAgICAgICAgICAgICJzaG9ydF9uYW1lIjogIkNhbGN1bGF0b3IiLAogICAgICAgICAgICAiZGVzY3JpcHRpb24iOiAiQnJlYWtwb2ludCBjYWxjdWxhdG9yIiwKICAgICAgICAgICAgInVybCI6ICIuL2luZGV4Lmh0bWw/dGFiPWNhbGN1bGF0b3IiLAogICAgICAgICAgICAiaWNvbnMiOiBbeyAic3JjIjogImljb25zL2ljb24tMTkyLnBuZyIsICJzaXplcyI6ICIxOTJ4MTkyIiB9XQogICAgICAgIH0KICAgIF0KfQo=" as="fetch" crossorigin />

        <!-- Security headers are set via Caddy HTTP headers (Caddyfile) -->
        <meta name="referrer" content="strict-origin-when-cross-origin" />

        <meta
            name="keywords"
            content="MegaBonk, roguelike, game guide, items, weapons, tomes, build planner, calculator"
        />
        <meta name="author" content="MegaBonk Community" />

        <!-- Open Graph / Facebook -->
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://megabonk.guide/" />
        <meta property="og:title" content="MegaBonk Complete Guide - Items, Weapons, Tomes & Builds" />
        <meta
            property="og:description"
            content="The ultimate reference for MegaBonk with 77 items, 29 weapons, 23 tomes, interactive build planner and breakpoint calculator"
        />
        <meta property="og:image" content="https://megabonk.guide/icons/icon-512.png" />

        <!-- Twitter -->
        <meta property="twitter:card" content="summary_large_image" />
        <meta property="twitter:url" content="https://megabonk.guide/" />
        <meta property="twitter:title" content="MegaBonk Complete Guide" />
        <meta
            property="twitter:description"
            content="Complete reference with 77 items, 29 weapons, 23 tomes, build planner and calculator"
        />
        <meta property="twitter:image" content="https://megabonk.guide/icons/icon-512.png" />

        <!-- Modular CSS - consolidated from styles/ directory -->
        <link rel="manifest" href="/assets/manifest-tH3Z4x3x.json" />
        <link rel="icon" type="image/png" sizes="192x192" href="/assets/icon-192-B-OjCZyu.png" />
        <link rel="apple-touch-icon" href="/assets/icon-192-B-OjCZyu.png" />

        <!-- Schema.org Structured Data -->
        <script type="application/ld+json">
            {
                "@context": "https://schema.org",
                "@type": "WebApplication",
                "name": "MegaBonk Complete Guide",
                "description": "Interactive reference guide for the roguelike game MegaBonk featuring items, weapons, tomes, characters, shrines, build planner, and breakpoint calculator",
                "url": "https://megabonk.guide",
                "applicationCategory": "GameApplication",
                "operatingSystem": "Any",
                "offers": {
                    "@type": "Offer",
                    "price": "0",
                    "priceCurrency": "USD"
                },
                "featureList": [
                    "77 items with detailed stats and scaling",
                    "29 weapons with upgrade paths",
                    "23 tomes with priority rankings",
                    "20 playable characters",
                    "8 shrine types",
                    "Interactive build planner",
                    "Breakpoint calculator",
                    "Offline PWA support"
                ],
                "screenshot": "https://megabonk.guide/icons/icon-512.png",
                "browserRequirements": "Requires JavaScript",
                "about": {
                    "@type": "VideoGame",
                    "name": "MegaBonk",
                    "gamePlatform": "PC",
                    "genre": "Roguelike"
                }
            }
        </script>
      <script type="module" crossorigin src="/assets/main-CCMahuXD.js"></script>
      <link rel="stylesheet" crossorigin href="/assets/main-B7S4mPPZ.css">
    <link rel="manifest" href="/manifest.webmanifest"><script id="vite-plugin-pwa:register-sw" src="/registerSW.js"></script></head>
    <body>
        <!-- Loading Overlay -->
        <div id="loading-overlay" class="loading-overlay" role="alert" aria-live="assertive" aria-busy="true">
            <div class="loading-spinner"></div>
            <p>Loading game data...</p>
        </div>

        <header>
            <div class="container">
                <h1>üéÆ MegaBonk<span class="header-subtitle"> Complete Guide</span></h1>
            </div>
        </header>

        <!-- Tab Navigation -->
        <nav class="tabs" aria-label="Main navigation">
            <div class="container">
                <div class="tab-buttons" role="tablist" aria-label="Content categories">
                    <button
                        class="tab-btn active"
                        data-tab="items"
                        role="tab"
                        aria-selected="true"
                        aria-controls="items-tab"
                        id="tab-items"
                    >
                        üì¶ Items
                    </button>
                    <button
                        class="tab-btn"
                        data-tab="weapons"
                        role="tab"
                        aria-selected="false"
                        aria-controls="weapons-tab"
                        id="tab-weapons"
                    >
                        ‚öîÔ∏è Weapons
                    </button>
                    <button
                        class="tab-btn"
                        data-tab="tomes"
                        role="tab"
                        aria-selected="false"
                        aria-controls="tomes-tab"
                        id="tab-tomes"
                    >
                        üìö Tomes
                    </button>
                    <button
                        class="tab-btn"
                        data-tab="characters"
                        role="tab"
                        aria-selected="false"
                        aria-controls="characters-tab"
                        id="tab-characters"
                    >
                        üë§ Characters
                    </button>
                    <button
                        class="tab-btn"
                        data-tab="shrines"
                        role="tab"
                        aria-selected="false"
                        aria-controls="shrines-tab"
                        id="tab-shrines"
                    >
                        ‚õ©Ô∏è Shrines
                    </button>
                    <button
                        class="tab-btn"
                        data-tab="build-planner"
                        role="tab"
                        aria-selected="false"
                        aria-controls="build-planner-tab"
                        id="tab-build-planner"
                    >
                        üõ†Ô∏è Build Planner
                    </button>
                    <button
                        class="tab-btn"
                        data-tab="calculator"
                        role="tab"
                        aria-selected="false"
                        aria-controls="calculator-tab"
                        id="tab-calculator"
                    >
                        üßÆ Calculator
                    </button>
                    <button
                        class="tab-btn"
                        data-tab="advisor"
                        role="tab"
                        aria-selected="false"
                        aria-controls="advisor-tab"
                        id="tab-advisor"
                    >
                        ü§ñ Advisor
                    </button>
                    <button
                        class="tab-btn"
                        data-tab="changelog"
                        role="tab"
                        aria-selected="false"
                        aria-controls="changelog-tab"
                        id="tab-changelog"
                    >
                        üìã Changelog
                    </button>
                    <button
                        class="tab-btn"
                        data-tab="about"
                        role="tab"
                        aria-selected="false"
                        aria-controls="about-tab"
                        id="tab-about"
                    >
                        ‚ÑπÔ∏è About
                    </button>
                </div>
            </div>
        </nav>

        <!-- Filters (context-sensitive based on active tab) -->
        <nav class="controls" aria-label="Search and filters">
            <div class="container">
                <div class="search-box">
                    <input
                        type="search"
                        id="searchInput"
                        placeholder="üîç Search..."
                        aria-label="Search items, weapons, tomes, and characters. Supports advanced syntax like tier:SS or damage:>100"
                        title="Advanced search: Use tier:SS, rarity:legendary, or damage:>100 syntax"
                        aria-expanded="false"
                        aria-haspopup="listbox"
                        aria-controls="searchResultsDropdown"
                        autocomplete="off"
                    />
                    <div
                        id="searchResultsDropdown"
                        class="search-results-dropdown"
                        role="listbox"
                        aria-label="Search results"
                        hidden
                    ></div>
                </div>

                <span id="item-count" class="item-count" aria-live="polite">0 items</span>

                <button
                    type="button"
                    id="filter-toggle-btn"
                    class="filter-toggle-btn"
                    aria-expanded="false"
                    aria-controls="filters"
                    aria-label="Toggle filters"
                >
                    <span class="filter-toggle-text">Filters</span>
                    <span class="filter-toggle-icon">‚öô</span>
                </button>

                <div class="filters" id="filters" aria-label="Filter options">
                    <!-- Filters dynamically updated based on active tab -->
                </div>
            </div>
        </nav>

        <main id="main-content" class="container">
            <!-- Tab Content Containers -->
            <div id="tab-content">
                <!-- Items Tab -->
                <div id="items-tab" class="tab-content active" role="tabpanel" aria-labelledby="tab-items">
                    <div id="itemsContainer" class="items-grid" aria-label="Items grid">
                        <!-- Items loaded dynamically -->
                    </div>
                </div>

                <!-- Weapons Tab -->
                <div id="weapons-tab" class="tab-content" role="tabpanel" aria-labelledby="tab-weapons">
                    <div id="weaponsContainer" class="items-grid" aria-label="Weapons grid">
                        <!-- Weapons loaded dynamically -->
                    </div>
                </div>

                <!-- Tomes Tab -->
                <div id="tomes-tab" class="tab-content" role="tabpanel" aria-labelledby="tab-tomes">
                    <div id="tomesContainer" class="items-grid" aria-label="Tomes grid">
                        <!-- Tomes loaded dynamically -->
                    </div>
                </div>

                <!-- Characters Tab -->
                <div id="characters-tab" class="tab-content" role="tabpanel" aria-labelledby="tab-characters">
                    <div id="charactersContainer" class="items-grid" aria-label="Characters grid">
                        <!-- Characters loaded dynamically -->
                    </div>
                </div>

                <!-- Shrines Tab -->
                <div id="shrines-tab" class="tab-content" role="tabpanel" aria-labelledby="tab-shrines">
                    <div id="shrinesContainer" class="items-grid" aria-label="Shrines grid">
                        <!-- Shrines loaded dynamically -->
                    </div>
                </div>

                <!-- Build Planner Tab -->
                <div id="build-planner-tab" class="tab-content" role="tabpanel" aria-labelledby="tab-build-planner">
                    <div id="buildPlannerContainer" class="build-planner">
                        <div class="build-section">
                            <h2>üõ†Ô∏è Build Your Perfect Loadout</h2>
                            <p>Select character, weapon, tomes, and items to see synergies and stats.</p>
                        </div>

                        <div class="build-grid">
                            <!-- Character Selection -->
                            <div class="build-slot">
                                <h3 id="character-label">üë§ Character</h3>
                                <select id="build-character" aria-labelledby="character-label">
                                    <option value="">Select Character...</option>
                                </select>
                                <div id="character-preview" class="slot-preview" role="status" aria-live="polite"></div>
                            </div>

                            <!-- Weapon Selection -->
                            <div class="build-slot">
                                <h3 id="weapon-label">‚öîÔ∏è Weapon</h3>
                                <select id="build-weapon" aria-labelledby="weapon-label">
                                    <option value="">Select Weapon...</option>
                                </select>
                                <div id="weapon-preview" class="slot-preview" role="status" aria-live="polite"></div>
                            </div>

                            <!-- Tomes Selection -->
                            <div class="build-slot full-width">
                                <h3 id="tomes-label">üìö Priority Tomes (Select up to 5)</h3>
                                <div
                                    id="tomes-selection"
                                    class="multi-select"
                                    role="group"
                                    aria-labelledby="tomes-label"
                                >
                                    <!-- Checkboxes generated dynamically -->
                                </div>
                            </div>

                            <!-- Items Selection -->
                            <div class="build-slot full-width">
                                <h3 id="items-label">üì¶ Core Items (Select up to 6)</h3>
                                <div
                                    id="items-selection"
                                    class="multi-select"
                                    role="group"
                                    aria-labelledby="items-label"
                                >
                                    <!-- Checkboxes generated dynamically -->
                                </div>
                            </div>
                        </div>

                        <!-- Build Analysis -->
                        <div class="build-analysis" role="region" aria-label="Build analysis">
                            <h3>üìä Build Analysis</h3>
                            <div
                                id="build-stats"
                                class="build-stats-grid"
                                role="status"
                                aria-live="polite"
                                aria-atomic="false"
                            >
                                <!-- Stats calculated dynamically -->
                            </div>
                            <div
                                id="build-synergies"
                                class="build-synergies-display"
                                role="status"
                                aria-live="polite"
                                aria-atomic="false"
                            >
                                <!-- Synergies shown dynamically -->
                            </div>
                        </div>

                        <!-- Export/Share -->
                        <div class="build-actions">
                            <button id="export-build" class="btn-primary">üìã Copy Build Code</button>
                            <button id="share-build-url" class="btn-primary">üîó Share Build Link</button>
                            <button id="clear-build" class="btn-secondary">üóëÔ∏è Clear Build</button>
                        </div>
                    </div>
                </div>

                <!-- Calculator Tab -->
                <div id="calculator-tab" class="tab-content" role="tabpanel" aria-labelledby="tab-calculator">
                    <div class="calculator-container">
                        <h2>üßÆ Breakpoint Calculator</h2>
                        <p class="calculator-subtitle">
                            Calculate how many stacks you need to reach desired thresholds
                        </p>

                        <div class="calculator-grid">
                            <div class="calculator-card">
                                <h3 id="calc-item-label">Select Item</h3>
                                <select
                                    id="calc-item-select"
                                    class="calc-select"
                                    aria-labelledby="calc-item-label"
                                    aria-describedby="calc-item-hint"
                                >
                                    <option value="">Choose an item...</option>
                                </select>
                                <p id="calc-item-hint" class="visually-hidden">
                                    Select an item to calculate required stacks
                                </p>
                            </div>

                            <div class="calculator-card">
                                <h3 id="calc-target-label">Desired Value</h3>
                                <input
                                    type="number"
                                    id="calc-target"
                                    class="calc-input"
                                    placeholder="e.g., 100 for 100%"
                                    min="1"
                                    aria-labelledby="calc-target-label"
                                    aria-describedby="calc-target-hint"
                                />
                                <p id="calc-target-hint" class="input-hint">Enter target percentage or value</p>
                            </div>

                            <div class="calculator-card full-width">
                                <button
                                    id="calc-button"
                                    class="btn-primary calc-btn"
                                    aria-label="Calculate stacks needed to reach target value"
                                >
                                    Calculate Stacks Needed
                                </button>
                            </div>

                            <div
                                id="calc-result"
                                class="calculator-result"
                                style="display: none"
                                role="status"
                                aria-live="polite"
                                aria-atomic="true"
                            >
                                <!-- Result displayed here -->
                            </div>
                        </div>

                        <div class="common-breakpoints">
                            <h3>Common Breakpoints</h3>
                            <div class="breakpoint-grid">
                                <!-- Using native button elements for proper keyboard accessibility -->
                                <button
                                    type="button"
                                    class="breakpoint-card"
                                    data-item="big_bonk"
                                    data-target="100"
                                    aria-label="Calculate 100% proc rate for Big Bonk"
                                >
                                    <div class="bp-icon">üí•</div>
                                    <div class="bp-text">
                                        <strong>Big Bonk</strong>
                                        <span>100% proc rate</span>
                                    </div>
                                    <div class="bp-answer">50 stacks</div>
                                </button>
                                <button
                                    type="button"
                                    class="breakpoint-card"
                                    data-item="spicy_meatball"
                                    data-target="100"
                                    aria-label="Calculate 100% explosions for Spicy Meatball"
                                >
                                    <div class="bp-icon">üî•</div>
                                    <div class="bp-text">
                                        <strong>Spicy Meatball</strong>
                                        <span>100% explosions</span>
                                    </div>
                                    <div class="bp-answer">4 stacks</div>
                                </button>
                                <button
                                    type="button"
                                    class="breakpoint-card"
                                    data-item="forbidden_juice"
                                    data-target="100"
                                    aria-label="Calculate 100% crit for Forbidden Juice"
                                >
                                    <div class="bp-icon">‚ö°</div>
                                    <div class="bp-text">
                                        <strong>Forbidden Juice</strong>
                                        <span>100% crit (Overcrit!)</span>
                                    </div>
                                    <div class="bp-answer">10 stacks</div>
                                </button>
                                <button
                                    type="button"
                                    class="breakpoint-card"
                                    data-item="ice_cube"
                                    data-target="100"
                                    aria-label="Calculate 100% freeze for Ice Cube"
                                >
                                    <div class="bp-icon">‚ùÑÔ∏è</div>
                                    <div class="bp-text">
                                        <strong>Ice Cube</strong>
                                        <span>100% freeze</span>
                                    </div>
                                    <div class="bp-answer">5 stacks</div>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Advisor Tab -->
                <div id="advisor-tab" class="tab-content" role="tabpanel" aria-labelledby="tab-advisor">
                    <div class="advisor-container">
                        <div class="advisor-header">
                            <h2>ü§ñ Build Advisor</h2>
                            <p class="advisor-subtitle">
                                Input your current build and the choices you're presented with to get intelligent
                                recommendations
                            </p>
                        </div>

                        <!-- NEW: Scan Build Section -->
                        <div class="advisor-section scan-section">
                            <h3>üì∏ Scan Your Build (Beta)</h3>
                            <p class="scan-subtitle">
                                Upload a screenshot of your pause menu and manually select the items you see. We'll help
                                you make the best decisions!
                            </p>

                            <div class="scan-upload-area">
                                <input type="file" id="scan-file-input" accept="image/*" style="display: none" />
                                <button id="scan-upload-btn" class="btn-primary scan-upload-btn">
                                    üì∑ Upload Screenshot
                                </button>
                                <p class="scan-hint">
                                    Supports JPG, PNG, WebP. Max 10MB. On mobile, choose from camera or gallery.
                                </p>
                            </div>

                            <!-- Image Preview -->
                            <div id="scan-image-preview" class="scan-image-preview" style="display: none">
                                <!-- Image displayed here -->
                            </div>

                            <!-- Auto-Detect Buttons -->
                            <div id="scan-auto-detect-area" class="scan-auto-detect-area" style="display: none">
                                <div class="scan-detect-buttons">
                                    <button id="scan-auto-detect-btn" class="btn-primary scan-auto-detect-btn">
                                        ü§ñ OCR Only (Phase 2)
                                    </button>
                                    <button id="scan-hybrid-detect-btn" class="btn-primary scan-hybrid-detect-btn">
                                        üéØ Hybrid: OCR + CV (Phase 3)
                                    </button>
                                </div>
                                <!-- Debug Panel -->
                                <div class="debug-panel" id="debug-panel">
                                    <div class="debug-panel-header" id="debug-panel-header">
                                        <label class="debug-toggle-main">
                                            <input type="checkbox" id="scan-debug-mode" />
                                            <span class="debug-toggle-text">Debug Mode</span>
                                        </label>
                                        <button
                                            class="debug-expand-btn"
                                            id="debug-expand-btn"
                                            title="Expand debug options"
                                        >
                                            <span class="debug-expand-icon">+</span>
                                        </button>
                                    </div>
                                    <div class="debug-panel-content" id="debug-panel-content" style="display: none">
                                        <!-- Overlay Options -->
                                        <div class="debug-section">
                                            <h5 class="debug-section-title">Overlay Options</h5>
                                            <div class="debug-options-grid">
                                                <label class="debug-option">
                                                    <input type="checkbox" id="debug-show-regions" checked />
                                                    <span>Region Bounds</span>
                                                </label>
                                                <label class="debug-option">
                                                    <input type="checkbox" id="debug-show-slots" checked />
                                                    <span>Slot Grid</span>
                                                </label>
                                                <label class="debug-option">
                                                    <input type="checkbox" id="debug-show-labels" checked />
                                                    <span>Confidence Labels</span>
                                                </label>
                                                <label class="debug-option">
                                                    <input type="checkbox" id="debug-show-detections" checked />
                                                    <span>Detection Boxes</span>
                                                </label>
                                                <label class="debug-option">
                                                    <input type="checkbox" id="debug-show-heatmap" />
                                                    <span>Variance Heatmap</span>
                                                </label>
                                                <label class="debug-option">
                                                    <input type="checkbox" id="debug-show-colors" />
                                                    <span>Dominant Colors</span>
                                                </label>
                                            </div>
                                        </div>
                                        <!-- Stats Section -->
                                        <div class="debug-section">
                                            <h5 class="debug-section-title">Detection Statistics</h5>
                                            <div class="debug-stats" id="debug-stats">
                                                <div class="debug-stat">
                                                    <span class="debug-stat-label">Total Detections</span>
                                                    <span class="debug-stat-value" id="debug-stat-total">0</span>
                                                </div>
                                                <div class="debug-stat">
                                                    <span class="debug-stat-label">Avg Confidence</span>
                                                    <span class="debug-stat-value" id="debug-stat-confidence">-</span>
                                                </div>
                                                <div class="debug-stat">
                                                    <span class="debug-stat-label">Avg Time</span>
                                                    <span class="debug-stat-value" id="debug-stat-time">-</span>
                                                </div>
                                                <div class="debug-stat">
                                                    <span class="debug-stat-label">Cache Hits</span>
                                                    <span class="debug-stat-value" id="debug-stat-cache">0/0</span>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Log Viewer -->
                                        <div class="debug-section">
                                            <h5 class="debug-section-title">
                                                Debug Logs
                                                <select id="debug-log-filter" class="debug-log-filter">
                                                    <option value="all">All</option>
                                                    <option value="error">Errors</option>
                                                    <option value="warn">Warnings</option>
                                                    <option value="info">Info</option>
                                                    <option value="debug">Debug</option>
                                                </select>
                                            </h5>
                                            <div class="debug-log-viewer" id="debug-log-viewer">
                                                <p class="debug-log-empty">No logs yet. Run a detection to see logs.</p>
                                            </div>
                                        </div>
                                        <!-- Actions -->
                                        <div class="debug-actions">
                                            <button
                                                class="debug-action-btn"
                                                id="debug-export-logs"
                                                title="Export logs as JSON"
                                            >
                                                Export Logs
                                            </button>
                                            <button
                                                class="debug-action-btn"
                                                id="debug-clear-logs"
                                                title="Clear all logs"
                                            >
                                                Clear Logs
                                            </button>
                                            <button
                                                class="debug-action-btn"
                                                id="debug-reset-stats"
                                                title="Reset statistics"
                                            >
                                                Reset Stats
                                            </button>
                                            <button
                                                class="debug-action-btn debug-action-download"
                                                id="debug-download-overlay"
                                                title="Download current overlay"
                                                disabled
                                            >
                                                Download Overlay
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <p class="scan-hint">
                                    <strong>OCR</strong>: Text recognition only. <strong>Hybrid</strong>: Text + visual
                                    pattern recognition for best accuracy.
                                </p>
                            </div>

                            <!-- Detection Confidence Info -->
                            <div id="scan-detection-info" class="scan-detection-info" style="display: none">
                                <!-- Detection results displayed here -->
                            </div>

                            <!-- Item Selection Area -->
                            <div id="scan-selection-area" class="scan-selection-area" style="display: none">
                                <div class="scan-selection-columns">
                                    <!-- Character Selection -->
                                    <div class="scan-selection-group">
                                        <h4>üë§ Select Your Character</h4>
                                        <div id="scan-character-grid" class="scan-character-grid">
                                            <!-- Characters loaded dynamically -->
                                        </div>
                                    </div>

                                    <!-- Weapon Selection -->
                                    <div class="scan-selection-group">
                                        <h4>‚öîÔ∏è Select Your Weapon</h4>
                                        <div id="scan-weapon-grid" class="scan-weapon-grid">
                                            <!-- Weapons loaded dynamically -->
                                        </div>
                                    </div>
                                </div>

                                <!-- Items Grid -->
                                <div class="scan-selection-group full-width">
                                    <h4>üì¶ Select Items (tap + to add, - to remove)</h4>
                                    <div id="scan-item-grid" class="scan-item-grid">
                                        <!-- Items loaded dynamically -->
                                    </div>
                                </div>

                                <!-- Tomes Grid -->
                                <div class="scan-selection-group full-width">
                                    <h4>üìö Select Tomes</h4>
                                    <div id="scan-tome-grid" class="scan-tome-grid">
                                        <!-- Tomes loaded dynamically -->
                                    </div>
                                </div>

                                <!-- Selection Summary -->
                                <div class="scan-summary-container">
                                    <div id="scan-selection-summary" class="scan-selection-summary">
                                        <!-- Summary displayed here -->
                                    </div>
                                    <button
                                        id="scan-apply-to-advisor"
                                        class="btn-primary scan-apply-btn"
                                        style="display: none"
                                    >
                                        ‚úÖ Apply to Advisor Below
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Current Build Input -->
                        <div class="advisor-section" id="advisor-current-build-section">
                            <h3>üìã Your Current Build</h3>

                            <div class="advisor-grid">
                                <!-- Character Selection -->
                                <div class="advisor-input-group">
                                    <label for="advisor-character">üë§ Character</label>
                                    <select id="advisor-character" class="advisor-select">
                                        <option value="">Select your character...</option>
                                    </select>
                                </div>

                                <!-- Weapon Selection -->
                                <div class="advisor-input-group">
                                    <label for="advisor-weapon">‚öîÔ∏è Weapon</label>
                                    <select id="advisor-weapon" class="advisor-select">
                                        <option value="">Select your weapon...</option>
                                    </select>
                                </div>

                                <!-- Current Items -->
                                <div class="advisor-input-group full-width">
                                    <label>üì¶ Current Items</label>
                                    <div id="advisor-current-items" class="advisor-chips-container">
                                        <button class="advisor-add-btn" id="add-current-item">+ Add Item</button>
                                    </div>
                                </div>

                                <!-- Current Tomes -->
                                <div class="advisor-input-group full-width">
                                    <label>üìö Current Tomes</label>
                                    <div id="advisor-current-tomes" class="advisor-chips-container">
                                        <button class="advisor-add-btn" id="add-current-tome">+ Add Tome</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Choice Options -->
                        <div class="advisor-section">
                            <h3>üé≤ What are you choosing between?</h3>
                            <div class="advisor-choices-grid" id="advisor-choices">
                                <div class="advisor-choice-card">
                                    <div class="advisor-input-group">
                                        <label for="choice-1-type">Choice 1 Type</label>
                                        <select class="advisor-select choice-type" id="choice-1-type">
                                            <option value="">Select type...</option>
                                            <option value="item">Item</option>
                                            <option value="weapon">Weapon</option>
                                            <option value="tome">Tome</option>
                                            <option value="shrine">Shrine</option>
                                        </select>
                                    </div>
                                    <div class="advisor-input-group">
                                        <label for="choice-1-entity">Choice 1</label>
                                        <select class="advisor-select choice-entity" id="choice-1-entity">
                                            <option value="">Select...</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="advisor-choice-card">
                                    <div class="advisor-input-group">
                                        <label for="choice-2-type">Choice 2 Type</label>
                                        <select class="advisor-select choice-type" id="choice-2-type">
                                            <option value="">Select type...</option>
                                            <option value="item">Item</option>
                                            <option value="weapon">Weapon</option>
                                            <option value="tome">Tome</option>
                                            <option value="shrine">Shrine</option>
                                        </select>
                                    </div>
                                    <div class="advisor-input-group">
                                        <label for="choice-2-entity">Choice 2</label>
                                        <select class="advisor-select choice-entity" id="choice-2-entity">
                                            <option value="">Select...</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="advisor-choice-card">
                                    <div class="advisor-input-group">
                                        <label for="choice-3-type">Choice 3 Type (Optional)</label>
                                        <select class="advisor-select choice-type" id="choice-3-type">
                                            <option value="">Select type...</option>
                                            <option value="item">Item</option>
                                            <option value="weapon">Weapon</option>
                                            <option value="tome">Tome</option>
                                            <option value="shrine">Shrine</option>
                                        </select>
                                    </div>
                                    <div class="advisor-input-group">
                                        <label for="choice-3-entity">Choice 3 (Optional)</label>
                                        <select class="advisor-select choice-entity" id="choice-3-entity">
                                            <option value="">Select...</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Get Recommendation Button -->
                        <div class="advisor-action">
                            <button id="get-recommendation" class="btn-primary advisor-btn">
                                üéØ Get Recommendation
                            </button>
                        </div>

                        <!-- Recommendation Results -->
                        <div id="advisor-results" class="advisor-results" style="display: none">
                            <h3>üí° Recommendation</h3>
                            <div id="advisor-results-content">
                                <!-- Results displayed here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Changelog Tab -->
                <div id="changelog-tab" class="tab-content" role="tabpanel" aria-labelledby="tab-changelog">
                    <div
                        id="changelogContainer"
                        class="changelog-container"
                        role="feed"
                        aria-label="Game changelog entries"
                    >
                        <!-- Changelog entries loaded dynamically -->
                    </div>
                </div>

                <!-- About Tab -->
                <div id="about-tab" class="tab-content" role="tabpanel" aria-labelledby="tab-about">
                    <div id="aboutContainer" class="about-container">
                        <!-- About content loaded dynamically -->
                    </div>
                </div>
            </div>
        </main>

        <!-- Modal for detailed item view -->
        <div id="itemModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
            <div class="modal-content">
                <button class="close" aria-label="Close modal">&times;</button>
                <h2 id="modal-title" class="sr-only">Item Details</h2>
                <div id="modalBody">
                    <!-- Modal content loaded dynamically -->
                </div>
            </div>
        </div>

        <!-- Modal for item comparison -->
        <div id="compareModal" class="modal" role="dialog" aria-modal="true" aria-label="Item comparison">
            <div class="modal-content modal-wide">
                <button class="close" id="closeCompare" aria-label="Close comparison">&times;</button>
                <h2>üìä Item Comparison</h2>
                <div id="compareBody" class="compare-container">
                    <!-- Comparison content loaded dynamically -->
                </div>
            </div>
        </div>

        <!-- Floating Compare Button -->
        <button id="compare-btn" class="floating-compare-btn" style="display: none" aria-label="Compare selected items">
            <span class="compare-count">0</span> Compare Items
        </button>

        <!-- Mobile Bottom Navigation -->
        <nav class="mobile-bottom-nav" aria-label="Mobile navigation">
            <div class="nav-items">
                <button class="nav-item active" data-tab="items" aria-label="Items">
                    <span class="nav-icon">üì¶</span>
                    <span>Items</span>
                </button>
                <button class="nav-item" data-tab="weapons" aria-label="Weapons">
                    <span class="nav-icon">‚öîÔ∏è</span>
                    <span>Weapons</span>
                </button>
                <button class="nav-item" data-tab="tomes" aria-label="Tomes">
                    <span class="nav-icon">üìñ</span>
                    <span>Tomes</span>
                </button>
                <button class="nav-item" data-tab="shrines" aria-label="Shrines">
                    <span class="nav-icon">‚õ©Ô∏è</span>
                    <span>Shrines</span>
                </button>
                <button class="nav-item" data-tab="more" aria-label="More tabs">
                    <span class="nav-icon">‚â°</span>
                    <span>More</span>
                </button>
            </div>
        </nav>

        <footer>
            <div class="container">
                <div class="version-info" role="status" aria-live="polite">
                    <span id="version">Version: Loading...</span>
                    <span id="last-updated">Last Updated: Loading...</span>
                </div>
                <p>
                    Made with ‚ù§Ô∏è for MegaBonk players |
                    <a href="https://store.steampowered.com/app/3405340/Megabonk/" target="_blank">Play on Steam</a>
                </p>
                <p class="disclaimer">Data sourced from official wikis and community guides. Always verify in-game!</p>
            </div>
        </footer>

        <!-- Main script with ES modules -->
    </body>
</html>
