const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/charts-ORHjErfM.js","assets/main-CUV550o9.js","assets/main-B7S4mPPZ.css"])))=>i.map(i=>d[i]);
import{g as a,s as n,a as e,d as s,_ as t,l as c,T as i,b as o,e as r,c as l,M as m,f as p,h as d}from"./main-CUV550o9.js";let h=!1;function g(){h=!1}function v(e){const s=a("compareItems")||[],t=s.indexOf(e);if(t>-1){const a=[...s];a.splice(t,1),n("compareItems",a)}else{if(s.length>=m)return void i.warning(`You can only compare up to ${m} items at once. Remove an item first.`);n("compareItems",[...s,e])}u()}function u(){const n=e("compare-btn");if(!n)return;const s=a("compareItems")||[],t=p(".compare-count",n);t&&(t.textContent=s.length.toString()),n.style.display=s.length>=2?"block":"none",d(".compare-checkbox").forEach(a=>{const n=a,e=n.dataset.id||n.value;n.checked=s.includes(e)})}async function y(){const n=a("compareItems")||[];if(n.length<2)return void i.warning("Select at least 2 items to compare!");const s=n.map(a=>o.items?.items?.find(n=>n.id===a)).filter(a=>void 0!==a),m=e("compareBody"),p=e("compareModal");if(!m||!p)return;const d=s.filter(a=>a.scaling_per_stack&&!a.one_and_done&&"flat"!==a.graph_type);let h="";d.length>=2&&(h+='\n            <div class="compare-chart-section">\n                <h3>Scaling Comparison</h3>\n                <div class="compare-chart-container">\n                    <canvas id="compare-scaling-chart" class="scaling-chart"></canvas>\n                </div>\n            </div>\n        '),h+='<div class="compare-grid">',s.forEach(a=>{const n=a.scaling_type&&(a.scaling_type.includes("chance")||a.scaling_type.includes("damage"))?"%":"";h+=`\n            <div class="compare-column">\n                <div class="compare-header">\n                    <h3>${r(a.name)}</h3>\n                    <div class="item-badges">\n                        <span class="badge rarity-${a.rarity}">${a.rarity}</span>\n                        <span class="badge tier-${a.tier}">${a.tier} Tier</span>\n                    </div>\n                </div>\n\n                <div class="compare-section">\n                    <h4>Base Effect</h4>\n                    <p>${r(a.base_effect||"N/A")}</p>\n                </div>\n\n                <div class="compare-section">\n                    <h4>Stacking</h4>\n                    ${void 0===a.stacks_well?'<p class="neutral">Stacking behavior unknown</p>':`<p class="${a.stacks_well?"positive":"negative"}">\n                            ${a.stacks_well?"✓ Stacks Well":"✗ One-and-Done"}\n                        </p>`}\n                </div>\n\n                <div class="compare-section">\n                    <h4>Formula</h4>\n                    <code class="formula-code">${r(a.formula||"N/A")}</code>\n                </div>\n\n                <div class="compare-section">\n                    <h4>Scaling (1-10 stacks)</h4>\n                    <div class="scaling-values">\n                        ${a.scaling_per_stack?a.scaling_per_stack.map((a,e)=>`<span class="scale-value">${e+1}: <strong>${a}${n}</strong></span>`).join(""):"N/A"}\n                    </div>\n                </div>\n\n                ${a.synergies?.length?`\n                    <div class="compare-section">\n                        <h4>Synergies</h4>\n                        <div class="synergy-tags">\n                            ${a.synergies.slice(0,5).map(a=>`<span class="synergy-tag">${r(a)}</span>`).join("")}\n                        </div>\n                    </div>\n                `:""}\n\n                ${a.anti_synergies?.length?`\n                    <div class="compare-section">\n                        <h4>Anti-Synergies</h4>\n                        <div class="antisynergy-tags">\n                            ${a.anti_synergies.map(a=>`<span class="antisynergy-tag">${r(a)}</span>`).join("")}\n                        </div>\n                    </div>\n                `:""}\n\n                <div class="compare-section">\n                    <h4>Notes</h4>\n                    <p class="notes">${r(a.notes||"N/A")}</p>\n                </div>\n\n                <button class="remove-compare-btn" data-remove-id="${a.id}" aria-label="Remove ${r(a.name)} from comparison">\n                    Remove from Comparison\n                </button>\n            </div>\n        `}),h+="</div>",m.innerHTML=h,p.style.display="block",p.setAttribute("aria-hidden","false"),requestAnimationFrame(()=>{p.classList.add("active"),l(p),d.length>=2&&requestAnimationFrame(async()=>{const a=e("compareModal"),n=document.getElementById("compare-scaling-chart");if(a&&a.classList.contains("active")&&n)try{const{createCompareChart:e}=await t(async()=>{const{createCompareChart:a}=await import("./charts-ORHjErfM.js");return{createCompareChart:a}},__vite__mapDeps([0,1,2]));a.classList.contains("active")&&n.parentElement&&e("compare-scaling-chart",d)}catch(s){c.warn({operation:"compare.load_chart",error:{name:s.name,message:s.message}})}})})}async function f(){if(h)return;const a=e("compareModal");a&&"none"!==a.style.display&&(h=!0,s(),a.classList.remove("active"),a.setAttribute("aria-hidden","true"),t(async()=>{const{chartInstances:a}=await import("./charts-ORHjErfM.js");return{chartInstances:a}},__vite__mapDeps([0,1,2])).then(({chartInstances:a})=>{const n=a;n&&n["compare-scaling-chart"]&&(n["compare-scaling-chart"].destroy(),delete n["compare-scaling-chart"])}).catch(a=>{c.info({operation:"compare.chart_cleanup_skipped",data:{reason:"module_not_loaded",error:a.message}})}),setTimeout(()=>{a.style.display="none",h=!1},300))}function _(){(a("compareItems")||[]).length<2?f():y()}function $(){n("compareItems",[]),u(),f()}function b(){return[...a("compareItems")||[]]}export{g as __resetCompareState,$ as clearCompare,f as closeCompareModal,b as getCompareItems,y as openCompareModal,v as toggleCompareItem,u as updateCompareButton,_ as updateCompareDisplay};
//# sourceMappingURL=compare-CWlFyeBe.js.map
